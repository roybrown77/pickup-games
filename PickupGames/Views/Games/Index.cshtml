@using System.Threading
@using PickupGames.Models
@using PickupGames.Domain.Objects
@model PickupGames.Models.GamesModel
@{
    ViewBag.Title = "Games";
}

<style>
    #search-location {
        position: fixed;top: .5em;z-index: 999999;left:6em
    }

    #sidebar {
        display: none; background-color: whitesmoke; position: fixed; top: 4em; left: 0; bottom: 0; width: 50%; overflow-y: scroll; overflow-x:hidden; -webkit-overflow-scrolling: touch
    }

    #more-filters-toggle {
        margin-top: 1em; margin-bottom: 1em
    }

    #show-listings-toggle {
        margin-top: 1em; margin-bottom: 1em; display:none
    }

    #showHideGameSearchToggle {
        width:100%;position:relative;bottom:0
    }

    #search-extra-filters {
        display:none
    }

    #searchgamesextraform > div> label {
        color: grey;
    }

    #map {
        display: block; width: 100%;position: fixed;top: 4em;right: 0;left: auto;bottom: 0
    }

    #map-canvas {
        position: relative;overflow: hidden;-webkit-transform: translateZ(0px);background-color: rgb(229, 227, 223);height: 100%;
    }

    #mobile-footer {
        background-color: white;padding: .5em 0 .5em 0;display:none;
    }

    #mobile-footer > div > div {
        color: grey;    
        font-weight: bold;
        cursor: pointer;
    }

    #search-results-mobile {
        width: 100%; margin: 0 !important; 
        border: 0;
        border-radius: 0;
        box-shadow: none;
        -webkit-box-shadow: none;
        background-color: whitesmoke;
        padding: .5em 0 0 0;
    }

    #search-results > div, #search-results-mobile > div {
        padding: 0 .5em .5em .5em;
    }

    #search-results > div > div, #search-results-mobile > div > div {
        box-shadow: 0 1px 2px lightgrey;
        background-color:white;color: grey;
        padding: .75em;
    }

    .sport {
        color:black;font-size: 13pt;
    }
</style>

<div id="search-location" class="row">
    <div class="col-xs-12">
        @Html.Partial("SearchLocation", Model.GameSearchModel)
    </div>
</div>

<div id="sidebar">
    <div class="col-xs-12">
        <div id="more-filters-toggle" class="row">
            <div class="col-xs-12">
                <button onclick="javascript:showHideGameSearchFilter();" class="btn btn-default">More Filters</button>
            </div>
        </div>
        <div id="search-extra-filters" class="row">
            <div class="col-xs-12">
                @Html.Partial("SearchExtra", Model.GameSearchModel)
            </div>
        </div>
        <div id="show-listings-toggle" class="row">
            <div class="col-xs-12">
                <button id="showHideGameSearchToggle" onclick="javascript:showHideGameSearchFilter();" class="btn btn-default">Show Listings</button>
            </div>
        </div>
        <div id="search-results" class="row">
            @foreach (var game in Model.GameListModel)
            {
                <div class="col-xs-12">
                    <div>
                        @*<div>
                            @game.Name
                        </div>*@
                        <div class="sport">
                            @game.Sport
                        </div>
                        <div>
                            @game.GameDate
                        </div>
                        @*<div>
                            @game.GameTime
                        </div>*@
                        <div id="location" data-lat="@game.LocationLat" data-lng="@game.LocationLng">
                            @game.Location
                        </div>
                        @*<div>
                            @game.PlayerCount
                            <span>players joined</span>
                        </div>
                        <div>
                            @game.DistanceToCenterLocation
                        </div>
                        <div>
                            @game.Duration
                        </div>
                        <div>
                            @game.Status
                        </div>
                        <div>
                            @game.AgeGroup
                        </div>
                        <div>
                            @game.Notes
                        </div>
                        <div>
                            @game.Views
                        </div>
                        <button onclick="javascript:joinGame('@game.Id');">Join</button>
                        <button onclick="javascript:watchGame('@game.Id');">Watch</button>
                        <button>Edit</button>
                        <button onclick="javascript:deleteGame('@game.Id');">Delete</button>*@
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<div id="map">    
    <div id="map-canvas">
    </div>
</div>

<div id="mobile-footer" class="navbar-fixed-bottom">  
    <div class="dropdown">
        <div id="search-results-mobile"class="dropdown-menu" role="menu">           
            @foreach (var game in Model.GameListModel)
            {
                <div class="col-xs-12">
                    <div>
                        @*<div>
                            @game.Name
                        </div>*@
                        <div>
                            @game.Sport
                        </div>
                        <div>
                            @game.GameDate
                        </div>
                        @*<div>
                            @game.GameTime
                        </div>*@
                        <div id="location" data-lat="@game.LocationLat" data-lng="@game.LocationLng">
                            @game.Location
                        </div>
                    </div>
                </div>
            }
        </div>
        <div class="col-xs-6" data-toggle="dropdown">
            LIST RESULTS
        </div>
        <div class="col-xs-6 text-right">
            FILTER
        </div>
    </div>
</div>

<script id="gamesTemplate" type="text/html">
    {{#games}}
    <div class="col-xs-12">
        <div>
            @*<div>
                {{Name}}
            </div>*@
            <div>
                {{Sport}}
            </div>
            <div>
                {{GameDate}}
            </div>
            @*<div>
                {{GameTime}}
            </div>*@
            <div class="location" data-lat={{LocationLat}} data-lng={{LocationLng}}>
                {{Location}}
            </div>
            @*<div>
                {{PlayerCount}}
                <span>players joined</span>
            </div>
            <div>
                {{DistanceToCenterLocation}}
            </div>
            <div>
                {{Duration}}
            </div>
            <div>
                {{Status}}
            </div>
            <div>
                {{AgeGroup}}
            </div>
            <div>
                {{Notes}}
            </div>
            <div>
                {{Views}}
            </div>
            <button onclick="javascript:joinGame('{{Id}}');">Join</button>
            <button onclick="javascript:watchGame('{{Id}}');">Watch</button>
            <button>Edit</button>
            <button onclick="javascript:deleteGame('{{Id}}');">Delete</button>*@
        </div>
    </div>
    {{/games}}
</script>
